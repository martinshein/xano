---
category: function-stack
difficulty: advanced
last_updated: '2025-01-23'
related_docs: []
subcategory: 02-core-concepts/function-stack
tags:
- authentication
- api
- webhook
- trigger
- query
- filter
- middleware
- expression
- realtime
- transaction
- function
- background-task
- custom-function
- rest
- database
title: '[![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2'
---

[![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Favatar-1626464608697.png%3Fgeneration%3D1626464608902290%26alt%3Dmedia&width=32&dpr=4&quality=100&sign=ed8a4004&sv=2)![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Favatar-1626464608697.png%3Fgeneration%3D1626464608902290%26alt%3Dmedia&width=32&dpr=4&quality=100&sign=ed8a4004&sv=2)](../../index.html)















-   

    
    -   Using These Docs
    -   Where should I start?
    -   Set Up a Free Xano Account
    -   Key Concepts
    -   The Development Life Cycle
    -   Navigating Xano
    -   Plans & Pricing

-   

    
    -   Building with Visual Development
        
        -   APIs
            
            -   [Swagger (OpenAPI Documentation)](../building-with-visual-development/apis/swagger-openapi-documentation.html)
                    -   Custom Functions
            
            -   [Async Functions](../building-with-visual-development/custom-functions/async-functions.html)
                    -   [Background Tasks](../building-with-visual-development/background-tasks.html)
        -   [Triggers](../building-with-visual-development/triggers.html)
        -   [Middleware](../building-with-visual-development/middleware.html)
        -   [Configuring Expressions](../building-with-visual-development/configuring-expressions.html)
        -   [Working with Data](../building-with-visual-development/working-with-data.html)
            -   Functions
        
        -   [AI Tools](ai-tools.html)
        -   Database Requests
            
            -   Query All Records
                
                -   [External Filtering Examples](database-requests/query-all-records/external-filtering-examples.html)
                            -   [Get Record](database-requests/get-record.html)
            -   [Add Record](database-requests/add-record.html)
            -   [Edit Record](database-requests/edit-record.html)
            -   [Add or Edit Record](database-requests/add-or-edit-record.html)
            -   [Patch Record](database-requests/patch-record.html)
            -   [Delete Record](database-requests/delete-record.html)
            -   [Bulk Operations](database-requests/bulk-operations.html)
            -   [Database Transaction](database-requests/database-transaction.html)
            -   [External Database Query](database-requests/external-database-query.html)
            -   [Direct Database Query](database-requests/direct-database-query.html)
            -   [Get Database Schema](database-requests/get-database-schema.html)
                    -   Data Manipulation
            
            -   [Create Variable](data-manipulation/create-variable.html)
            -   [Update Variable](data-manipulation/update-variable.html)
            -   [Conditional](data-manipulation/conditional.html)
            -   [Switch](data-manipulation/switch.html)
            -   [Loops](data-manipulation/loops.html)
            -   [Math](data-manipulation/math.html)
            -   [Arrays](data-manipulation/arrays.html)
            -   [Objects](data-manipulation/objects.html)
            -   [Text](data-manipulation/text.html)
                    -   [Security](security.html)
        -   APIs & Lambdas
            
            -   [Realtime Functions](apis-and-lambdas/realtime-functions.html)
            -   [External API Request](apis-and-lambdas/external-api-request.html)
            -   [Lambda Functions](apis-and-lambdas/lambda-functions.html)
                    -   [Data Caching (Redis)](data-caching-redis.html)
        -   [Custom Functions](custom-functions.html)
        -   [Utility Functions](utility-functions.html)
        -   [File Storage](file-storage.html)
        -   [Cloud Services](cloud-services.html)
            -   Filters
        
        -   [Manipulation](../filters/manipulation.html)
        -   [Math](../filters/math.html)
        -   [Timestamp](../filters/timestamp.html)
        -   [Text](../filters/text.html)
        -   [Array](../filters/array.html)
        -   [Transform](../filters/transform.html)
        -   [Conversion](../filters/conversion.html)
        -   [Comparison](../filters/comparison.html)
        -   [Security](../filters/security.html)
            -   Data Types
        
        -   [Text](../data-types/text.html)
        -   [Expression](../data-types/expression.html)
        -   [Array](../data-types/array.html)
        -   [Object](../data-types/object.html)
        -   [Integer](../data-types/integer.html)
        -   [Decimal](../data-types/decimal.html)
        -   [Boolean](../data-types/boolean.html)
        -   [Timestamp](../data-types/timestamp.html)
        -   [Null](../data-types/null.html)
            -   Environment Variables
    -   Additional Features
        
        -   [Response Caching](../additional-features/response-caching.html)
        
-   
    Testing and Debugging
    
    -   Testing and Debugging Function Stacks
    -   Unit Tests
    -   Test Suites

-   
    The Database
    
    -   Getting Started Shortcuts
    -   Designing your Database
    -   Database Basics
        
        -   [Using the Xano Database](../../the-database/database-basics/using-the-xano-database.html)
        -   [Field Types](../../the-database/database-basics/field-types.html)
        -   [Relationships](../../the-database/database-basics/relationships.html)
        -   [Database Views](../../the-database/database-basics/database-views.html)
        -   [Export and Sharing](../../the-database/database-basics/export-and-sharing.html)
        -   [Data Sources](../../the-database/database-basics/data-sources.html)
            -   Migrating your Data
        
        -   [Airtable to Xano](../../the-database/migrating-your-data/airtable-to-xano.html)
        -   [Supabase to Xano](../../the-database/migrating-your-data/supabase-to-xano.html)
        -   [CSV Import & Export](../../the-database/migrating-your-data/csv-import-and-export.html)
            -   Database Performance and Maintenance
        
        -   [Storage](../../the-database/database-performance-and-maintenance/storage.html)
        -   [Indexing](../../the-database/database-performance-and-maintenance/indexing.html)
        -   [Maintenance](../../the-database/database-performance-and-maintenance/maintenance.html)
        -   [Schema Versioning](../../the-database/database-performance-and-maintenance/schema-versioning.html)
        
-   CI/CD

-   
    Build For AI
    
    -   Agents
        
        -   [Templates](../../ai-tools/agents/templates.html)
            -   MCP Builder
        
        -   [Connecting Clients](../../ai-tools/mcp-builder/connecting-clients.html)
        -   [MCP Functions](../../ai-tools/mcp-builder/mcp-functions.html)
            -   Xano MCP Server

-   
    Build With AI
    
    -   Using AI Builders with Xano
    -   Building a Backend Using AI
    -   Get Started Assistant
    -   AI Database Assistant
    -   AI Lambda Assistant
    -   AI SQL Assistant
    -   API Request Assistant
    -   Template Engine
    -   Streaming APIs

-   
    File Storage
    
    -   File Storage in Xano
    -   Private File Storage

-   
    Realtime
    
    -   Realtime in Xano
    -   Channel Permissions
    -   Realtime in Webflow

-   
    Maintenance, Monitoring, and Logging
    
    -   Statement Explorer
    -   Request History
    -   Instance Dashboard
        
        -   Memory Usage
        
-   
    Building Backend Features
    
    -   User Authentication & User Data
        
        -   [Separating User Data](../../building-backend-features/user-authentication-and-user-data/separating-user-data.html)
        -   [Restricting Access (RBAC)](../../building-backend-features/user-authentication-and-user-data/restricting-access-rbac.html)
        -   [OAuth (SSO)](../../building-backend-features/user-authentication-and-user-data/oauth-sso.html)
            -   Webhooks
    -   Messaging
    -   Emails
    -   Custom Report Generation
    -   Fuzzy Search
    -   Chatbots

-   
    Xano Features
    
    -   Snippets
    -   Instance Settings
        
        -   [Release Track Preferences](../../xano-features/instance-settings/release-track-preferences.html)
        -   [Static IP (Outgoing)](../../xano-features/instance-settings/static-ip-outgoing.html)
        -   [Change Server Region](../../xano-features/instance-settings/change-server-region.html)
        -   [Direct Database Connector](../../xano-features/instance-settings/direct-database-connector.html)
        -   [Backup and Restore](../../xano-features/instance-settings/backup-and-restore.html)
        -   [Security Policy](../../xano-features/instance-settings/security-policy.html)
            -   Workspace Settings
        
        -   [Audit Logs](../../xano-features/workspace-settings/audit-logs.html)
            -   Advanced Back-end Features
        
        -   [Xano Link](../../xano-features/advanced-back-end-features/xano-link.html)
        -   [Developer API (Deprecated)](../../xano-features/advanced-back-end-features/developer-api-deprecated.html)
            -   Metadata API
        
        -   [Master Metadata API](../../xano-features/metadata-api/master-metadata-api.html)
        -   [Tables and Schema](../../xano-features/metadata-api/tables-and-schema.html)
        -   [Content](../../xano-features/metadata-api/content.html)
        -   [Search](../../xano-features/metadata-api/search.html)
        -   [File](../../xano-features/metadata-api/file.html)
        -   [Request History](../../xano-features/metadata-api/request-history.html)
        -   [Workspace Import and Export](../../xano-features/metadata-api/workspace-import-and-export.html)
        -   [Token Scopes Reference](../../xano-features/metadata-api/token-scopes-reference.html)
        
-   
    Xano Transform
    
    -   Using Xano Transform

-   
    Xano Actions
    
    -   What are Actions?
    -   Browse Actions

-   
    Team Collaboration
    
    -   Realtime Collaboration
    -   Managing Team Members
    -   Branching & Merging
    -   Role-based Access Control (RBAC)

-   
    Agencies
    
    -   Xano for Agencies
    -   Agency Features
        
        -   [Agency Dashboard](../../agencies/agency-features/agency-dashboard.html)
        -   [Client Invite](../../agencies/agency-features/client-invite.html)
        -   [Transfer Ownership](../../agencies/agency-features/transfer-ownership.html)
        -   [Agency Profile](../../agencies/agency-features/agency-profile.html)
        -   [Commission](../../agencies/agency-features/commission.html)
        -   [Private Marketplace](../../agencies/agency-features/private-marketplace.html)
        
-   
    Custom Plans (Enterprise)
    
    -   Xano for Enterprise (Custom Plans)
    -   Custom Plan Features
        
        -   Microservices
            
            -   Ollama
                
                -   [Choosing a Model](../../enterprise/enterprise-features/microservices/ollama/choosing-a-model.html)
                                    -   [Tenant Center](../../enterprise/enterprise-features/tenant-center.html)
        -   [Compliance Center](../../enterprise/enterprise-features/compliance-center.html)
        -   [Security Policy](../../enterprise/enterprise-features/security-policy.html)
        -   [Instance Activity](../../enterprise/enterprise-features/instance-activity.html)
        -   [Deployment](../../enterprise/enterprise-features/deployment.html)
        -   [RBAC (Role-based Access Control)](../../enterprise/enterprise-features/rbac-role-based-access-control.html)
        -   [Xano Link](../../enterprise/enterprise-features/xano-link.html)
        -   [Resource Management](../../enterprise/enterprise-features/resource-management.html)
        
-   
    Your Xano Account
    
    -   Account Page
    -   Billing
    -   Referrals & Commissions

-   
    Troubleshooting & Support
    
    -   Error Reference
    -   Troubleshooting Performance
        
        -   [When a single workflow feels slow](../../troubleshooting-and-support/troubleshooting-performance/when-a-single-workflow-feels-slow.html)
        -   [When everything feels slow](../../troubleshooting-and-support/troubleshooting-performance/when-everything-feels-slow.html)
        -   [RAM Usage](../../troubleshooting-and-support/troubleshooting-performance/ram-usage.html)
        -   [Function Stack Performance](../../troubleshooting-and-support/troubleshooting-performance/function-stack-performance.html)
            -   Getting Help
        
        -   [Granting Access](../../troubleshooting-and-support/getting-help/granting-access.html)
        -   [Community Code of Conduct](../../troubleshooting-and-support/getting-help/community-code-of-conduct.html)
        -   [Community Content Modification Policy](../../troubleshooting-and-support/getting-help/community-content-modification-policy.html)
        -   [Reporting Potential Bugs and Issues](../../troubleshooting-and-support/getting-help/reporting-potential-bugs-and-issues.html)
        
-   
    Special Pricing
    
    -   Students & Education
    -   Non-Profits

-   
    Security
    
    -   Best Practices

[Powered by GitBook]

On this page

-   
    
    [Return](#return)

-   [Try/Catch](#try-catch)

-   [Throw Error](#throw-error)

-   [Post Process](#post-process)

-   [Debug Log](#debug-log)

-   [Precondition](#precondition)

-   [Preconditions use the expression builder to define the conditions it checks. Click to define your conditions.](#preconditions-use-the-expression-builder-to-define-the-conditions-it-checks.-click-to-define-your-co)

-   [Define what happens if the conditions do not evaluate as true.](#define-what-happens-if-the-conditions-do-not-evaluate-as-true)

-   [Stop & Debug](#stop-and-debug)

-   [Group](#group)

-   [Sleep](#sleep)

-   [CSV Stream](#csv-stream)

-   [JSONL Stream](#jsonl-stream)

-   [HTTP Header](#http-header)

-   [Get All Variables](#get-all-variables)

-   [Get All Input](#get-all-input)

-   [Get All Raw Input](#get-all-raw-input)

-   [Get Environment Variables](#get-environment-variables)

-   [Calculate Distance](#calculate-distance)

-   [IP Address Lookup](#ip-address-lookup)

-   [Set Data Source](#set-data-source)

-   [Async Function Await](#async-function-await)

Was this helpful?

Copy


2.  Functions

Utility Functions 
=================

 

Return

Halts execution and returns the defined result immediately. Return is useful when used in combination with [conditional statements](data-manipulation/conditional.html) where you want to change the return based on the result of the condition.

 

Try/Catch

<div>

</div>

Try/catch enables you to catch any errors that may occur in a specific stack of functions and execute additional logic based on that result. This function essentially enables fully custom error handling in Xano.

**Try** - Try these functions first

**Catch** - Execute these functions if the Try statements return an error

**Finally** - Execute these functions regardless of the result

In the below example, we are starting with a Delete File function, and trying to delete a file that does not exist.

[![](../../_gitbook/imagef9e9.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252Fxbvf0fzltx4aXQWA8vjN%252FCleanShot%25202023-08-14%2520at%252010.39.24.png%3Falt%3Dmedia%26token%3Dd5d98ba9-8127-4e6f-aac9-206aa20c223d&width=768&dpr=4&quality=100&sign=5cc52d1d&sv=2)]

Deleting a file that does not exist returns ERROR\_CODE\_NOT\_FOUND and halts execution.

Normally, when an error occurs in the function stack, execution is halted entirely. If we wanted to deploy some customized error handling to change this behavior, we can do so by placing this function inside of a Try/Catch statement.

In the below iteration, we\'ve moved Delete File into the Try portion of a Try/Catch statement. Now, when we run the endpoint again, the function itself is still failing, but the API itself still returns a success response.

[![](../../_gitbook/image317f.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252F4Kd94I5hujMitRYhShlz%252FCleanShot%25202023-08-14%2520at%252010.42.09.png%3Falt%3Dmedia%26token%3D2e4335bd-247e-4656-aae0-8344b4fe5d39&width=768&dpr=4&quality=100&sign=e04b191f&sv=2)]

We can then use the Catch portion to read the error, using three variables only available via Try/Catch.

[![](../../_gitbook/image5014.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252F5slMMFHmrC889McrM9qN%252FCleanShot%25202023-08-14%2520at%252010.44.42.png%3Falt%3Dmedia%26token%3Da40eb553-9fc3-46f2-9f3f-8be65babb4cc&width=768&dpr=4&quality=100&sign=b9b3adbd&sv=2)]

-   
    
        
    
    **code** is the error code
    
-   
    
        
    
    **message** is the error message
    
-   
    
        
    
    **result** will be any accompanying data. Most functions will not output a result, and only return data in **code** and **message**
    
When we run this again and output those variables as part of our response, you\'ll see that the API still returns a \'Success\' result, but we can view the error message returned by our function in our Try statement.

[![](../../_gitbook/image2f6d.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252F7ogHqaCUiRBD2YHykfuG%252FCleanShot%25202023-08-14%2520at%252010.53.14.png%3Falt%3Dmedia%26token%3D945b89ce-a814-4c79-9370-12e7be0706f6&width=768&dpr=4&quality=100&sign=3421a060&sv=2)]

You can then use the Finally section to determine the behavior based on the result of your Try/Catch. In the below example, we\'re using a conditional statement to check if the try/catch **code** variable is empty. If it is empty, we return a success message. If it is not empty (which means there was an error in our Try statements), we return an error message.

[![](../../_gitbook/image491f.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FgxTBcC7IhNitXIXxCVJt%252FCleanShot%25202023-08-16%2520at%252009.36.35.png%3Falt%3Dmedia%26token%3D9b06c4d8-25af-449b-87b5-697799c68e58&width=768&dpr=4&quality=100&sign=72d8a37a&sv=2)]

**Practical Example of using Try/Catch**

<div>

</div>

 

Throw Error

![](../../_gitbook/image6b95.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FBn6ngBFjvdeAUTQnaZoX%252FCleanShot%25202025-01-14%2520at%252007.36.26.png%3Falt%3Dmedia%26token%3D0660fe88-5bbb-476c-914a-269a54224b37&width=768&dpr=4&quality=100&sign=ea66814a&sv=2)

Throw Error allows you to halt execution with a custom error message. This is different from a Precondition step because it does not restrict you to specific error codes. It can be used in combination with Try/Catch or on its own.

 

Post Process

Post process allows you to execute additional logic after your API has provided a response. This can be useful if you want to see a response on your front-end without waiting for any additional processing to occur, but a background task does not meet your needs.

**Example**

[![](../../_gitbook/image1e8b.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FIMh3k0mFfRxNQ5erm9vB%252FCleanShot%25202023-06-15%2520at%252012.46.44.png%3Falt%3Dmedia%26token%3D1b467b25-fa9e-4756-8ba2-490ff88656b2&width=768&dpr=4&quality=100&sign=a56a59d0&sv=2)]

In this function stack, we are setting **var\_1** with a value of \"Hello\" and calling an external API to send the contents of this variable.

Afterwards, we have added Post Process to update **var\_1** and send a new request to the same external API.

The function stack is set to respond with the contents of **var\_1.**

[![](../../_gitbook/image747b.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FpuMfL2knQEP732MYh0It%252FCleanShot%25202023-06-15%2520at%252012.51.09.png%3Falt%3Dmedia%26token%3D58abb41d-988f-4604-8a4b-32e46b00cfc5&width=768&dpr=4&quality=100&sign=47f41e22&sv=2)]

This means that the following will happen in sequence:

1.  
    
        
    
    Set **var\_1** to \"Hello!\"
    
2.  
    
        
    
    Send **var\_1** to external API
    
3.  
    
        
    
    The Xano API responds with \"Hello!\"
    
4.  
    
        
    
    Set **var\_1** to \"Goodbye!\"
    
5.  
    
        
    
    Send **var\_1** to external API
    
Below is a video of this example in action. Note how the external API recieves both \'Hello\' and \'Goodbye\', but the Xano API just responds with \'Hello\'. *Note: the video does not contain any audio.*

Post Process will use the state of variables where it is defined. This means that while Post Process executes at the end of the function stack, the placement is still important to ensure that any variables it uses retain the appropriate content.

Post Process also enables the use of some special variables: **body, headers,** and **status\_code**. These are only available during post process, and can be used to transmit any of the corresponding data back to a database table, or to an external API, to record the results of post process.

[![](../../_gitbook/image7212.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252F0SFeqaqx8uLibm3CqKWT%252FCleanShot%25202023-07-31%2520at%252012.16.38%25402x.png%3Falt%3Dmedia%26token%3D0f0322f4-5187-4820-ba68-298216a86c11&width=768&dpr=4&quality=100&sign=f7987be7&sv=2)]

 

Debug Log

Debug Log allows you to output specific information in a new debug logging section of the Debugger. This is similar to how a console log statement in Javascript would behave. These steps will not run outside of Run & Debug.

<div>

</div>

This can be especially helpful for debugging data errors with loops or otherwise just giving you a quick view of a variable\'s contents during execution. You can insert whatever data you\'d like into Debug Logs; they will accept any data type, and can also have filters applied.

[![](../../_gitbook/image2fe1.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FfkzLyb7SOy1WPb7iu051%252FCleanShot%25202023-08-16%2520at%252009.46.37.png%3Falt%3Dmedia%26token%3D2284fa85-07b0-42bd-9334-9069ed3544d0&width=768&dpr=4&quality=100&sign=13613d68&sv=2)]

In the below example, we\'re looping through results from a Query All Records statement, and outputting a specific value from each item to the new Debug Log.

[![](../../_gitbook/image47ad.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FNqGUuWQClxPcc9yVo3Fs%252FCleanShot%25202023-08-16%2520at%252009.42.28.png%3Falt%3Dmedia%26token%3Dc57276c1-49d9-4a3c-ab69-c4cef58717a9&width=768&dpr=4&quality=100&sign=7a2fb26&sv=2)]

And the result is available in the new Debug Log section of the debugger

![](../../_gitbook/imagefb1b.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FNrd5I7E1VPDKh1CvBYxd%252FCleanShot%25202025-04-14%2520at%252017.42.31.png%3Falt%3Dmedia%26token%3D7f045641-212c-4145-8e8e-3a8fe89433c7&width=768&dpr=4&quality=100&sign=bab3f528&sv=2)

 

Precondition

A precondition is a statement that says \"this condition must evaluate as true, or we halt execution and return an error message.\"

<div>

1

###  

Preconditions use the expression builder to define the conditions it checks. Click [![](../../_gitbook/image9884.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FJSZJZfHa42EcYwxWdtmh%252FCleanShot%25202025-01-14%2520at%252007.43.22.png%3Falt%3Dmedia%26token%3D1990e471-7a06-4861-aa9f-2a937e83f75e&width=300&dpr=4&quality=100&sign=a751779e&sv=2)]to define your conditions.

###  

Using the Expression Builder

Each conditional has four different components.

**Conditional Type**

The conditional type determines how this condition is weighted in the final return. You can choose between **AND** and **OR. AND** conditionals require the present conditional and any others before it to be satisfied, such as \"where the date is before today **AND** the user is an admin\". **OR** conditionals do not require any other conditionals to be satisfied, such as \"if the user is an admin **OR** if the user is a manager\".

**Left Value**

This is the first value you\'re using in the conditional. In a database query, this is usually going to be a column that you want to check against.

**Operators**

Please note that operators may differ based on where you are building the expression. Database queries will have different operators available than regular conditional statements. Learn More

-   
    
        
    
    **Equals (==)** - an exact match
    
-   
    
        
    
    **Not Equals (!=)** - does not equal
    
-   
    
        
    
    **Equals with type matching (===)** - an exact value match and an exact type match

    -   
        
                
        
        Ex. Variable **var\_1** has a value of 123, with a type of text. You set up a conditional statement to check if **var\_1 === 123**, but your value in the conditional statement is of type integer. This would return false, because the types do not match.
            
-   
    
        
    
    **Not equals with type matching (!==)** - does not equal value or type, similar to ===
    
-   
    
        
    
    **Greater than (\>)** - the value on the left is greater than the value on the right
    
-   
    
        
    
    **Greater than or equals (≥)** - the value on the left is greater than or equals to the value on the right.
    
-   
    
        
    
    **Less than (\<)** - the value on the left is less than the value on the right.
    
-   
    
        
    
    **Less than or equals (≤)** - the value on the left is less than or equals to the value on the right.
    
-   
    
        
    
    **LIKE** - Used for comparing text. Like is case-insensitive and compares if a text string is like another text string. It can be thought of as equals for text but upper case and lower case does not matter.
    
-   
    
        
    
    **NOT LIKE** - Used for comparing text. Not Like is case-insensitive and compares if a text string is not like another. It is like not equals for text but upper case and lower case does not matter.
    
-   
    
        
    
    **INCLUDES** - Used for comparing text. Includes is a flexible operator and is case-insensitive. It is able to determine if there is a partial match in a text string.
    
-   
    
        
    
    **DOES NOT INCLUDE** - Used for comparing text. Does not include determines if a text string is not included in another text string.
    
-   
    
        
    
    **IN** - If a single value is found in an array (list). Start with the single value on the left side and the right side should contain the array.
    
-   
    
        
    
    **NOT IN** - If a single value is not found in an array (list). The single value should be on the left side and the array on the right side.
    
-   
    
        
    
    **REGEX MATCHES** - [Regular Expression](https://regex101.com/) used for finding patterns in text.
    
-   
    
        
    
    **REGEX DOES NOT MATCH** - [Regular Expression](https://regex101.com/) used for finding a pattern that does not match in text.
    
-   
    
        
    
    **OVERLAPS** - Used for comparing two arrays. Overlaps determines if any values in one array are present in the second array.
    
-   
    
        
    
    **DOES NOT OVERLAP** - Used for comparing two arrays. Does not overlaps determines if no values in the first array are present in the second array.
    
-   
    
        
    
    **CONTAINS** - Contains is an advanced filter used for JSON and arrays. It looks for an exact schema match.
    
-   
    
        
    
    **DOES NOT CONTAIN** - Does not contain is the opposite of contains. It determines if there is not an exact schema match.
    
####  

Right Value

The right value is whatever you are checking against the left value. This could be a hardcoded value, a variable, or even a database field from the same record.

2

###  

Define what happens if the conditions do [not] evaluate as true.

You can provide a custom error message, choose an error type, and supply a payload to return, such as the values being checked in your conditions.

![](../../_gitbook/imageedcc.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FxUyE56Ve4yx3LJGEYHVP%252FCleanShot%25202025-01-14%2520at%252007.44.39.png%3Falt%3Dmedia%26token%3D4704b1f1-ced8-47c4-9f85-a0dfa69cf883&width=768&dpr=4&quality=100&sign=136eb86a&sv=2)

</div>

 

Stop & Debug

Halts execution and returns a value. Useful to ensure that specific pieces of your function stack are running as expected while building.

[![](../../_gitbook/imageea01.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FV5XiSR8wF5MLno1oul1K%252FCleanShot%25202025-01-14%2520at%252007.45.40.png%3Falt%3Dmedia%26token%3D5be4cdd4-e5d7-4acc-8c17-7e3b52cd74d6&width=300&dpr=4&quality=100&sign=c2101f19&sv=2)]

 

Group

Groups functions together. This is an organizational tool for you as you build your function stacks and does not impact any part of the actual execution.

 

Sleep

Waits for a defined number of seconds before proceeding to the next step.

![](../../_gitbook/image0f31.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FSHMhhOcb0Ob70gmm5lD0%252FCleanShot%25202025-01-14%2520at%252007.46.43.png%3Falt%3Dmedia%26token%3D122b2cbd-ec30-4e87-b2d0-c30ac325e3c1&width=768&dpr=4&quality=100&sign=c10b6826&sv=2)

 

CSV Stream

CSV Stream is a powerful function allowing you to \'stream\' chunks of a CSV file in sequence to your function stack, allowing for processing of large CSV files.

<div>

</div>

A successful CSV stream function stack includes three essential parts.

-   
    
        
    
    a **file resource** to ingest the CSV file This can come from either a File Resource input, or a file delivered by an external API, with a Create File Resource step applied
    
-   
    
        
    
    a **CSV stream** function to stream the CSV data This function initiates the streaming of CSV data, and provides an output variable. This output variable is meant for use with a [For Each](data-manipulation/loops.html) loop
    
-   
    
        
    
    a **For Each** loop to run through the individual CSV rows The loop is responsible for performing any functions you\'d like on your CSV, such as adding each row to one of your database tables.
    
In the below example, we\'ve added these three key components, and can now process the incoming CSV data.

CSV Stream is a much simpler alternative to the previously established method of array functions and object manipulation to process incoming CSV data.

[![](../../_gitbook/image4046.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252Fj8OJrQBiT8tGPjThjsoT%252FCleanShot%25202023-08-22%2520at%252013.11.40.png%3Falt%3Dmedia%26token%3D1811bee6-151f-4e51-a611-aa9696b1fc5e&width=768&dpr=4&quality=100&sign=dfe9eb92&sv=2)][![](../../_gitbook/image61b1.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FKOXw1hBeIxLNr7KQkU05%252FCleanShot%25202023-08-22%2520at%252013.31.16.png%3Falt%3Dmedia%26token%3Db58a1297-acbd-4682-ba9e-1ec17021fcc0&width=768&dpr=4&quality=100&sign=22707bb&sv=2)]

 

JSONL Stream

JSONL Stream is a powerful function allowing you to \'stream\' chunks of JSON in sequence to your function stack, allowing for processing of large data sets, similar to the CSV Stream function above.

 

HTTP Header

Set a custom HTTP header. This function is useful if you need your responses to deliver specific, custom headers. You can also use this to specify custom API response codes outside of the ones our Precondition function offers.

The **duplicates** parameter lets you decide to either replace headers that already exist with your new header, or allow for duplicate headers to exist.

[![](../../_gitbook/image6537.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FkWGM2cd8pSOO5OLWHKe6%252FCleanShot%25202024-05-14%2520at%252010.15.28.png%3Falt%3Dmedia%26token%3De364c299-980c-4b00-8153-099f53a57fec&width=768&dpr=4&quality=100&sign=db87ede2&sv=2)]

Examples of Custom HTTP Headers

Please note that each individual header should use its own Set Header function.

**Rate Limiting**

These will not enforce rate limits themselves, but it\'s good information to have in your headers if you are rate limiting your APIs.

Copy

``` 
X-Rate-Limit-Limit: 100
X-Rate-Limit-Remaining: 95
X-Rate-Limit-Reset: 1615560000
```

####  

Serving Content Downloads

If you want your API to directly serve file downloads, use this header:

Copy

``` 
Content-Disposition: attachment; filename="report.pdf"
```

You may also need:

Copy

``` 
Content-Type: text/html
```

####  

Custom HTTP Status

Sometimes, you might need to send an HTTP status that Xano doesn\'t natively offer using preconditions.

Copy

``` 
HTTP/1.1 201 Created
Content-Type: application/json
```

 

Get All Variables

Returns all of the variables present up to that point in the function stack.

 

Get All Input

Returns all of the inputs sent to the API in a single object.

 

Get All Raw Input

Returns all data sent to the API, even if they are not defined inputs. You\'d use this function when building a **Webhook,** or you otherwise aren\'t sure what data will be sent to this endpoint.

Exclude Middleware Modification should be set to `false` if you intend on using the raw data in your function stack **before** it\'s modified by Middleware.

 

Get Environment Variables

Returns all of your [environment variables](../environment-variables.html) in a single object.

 

Calculate Distance

Calculate the distance between two longitude/Latitude points

[![](../../_gitbook/image9b69.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fassets%252F-M8Si5XvG2QHSLi9JcVY%252F-Mjg_gOhGJZveGbTz7R9%252F-Mjgggyj6dje-LzTNJY4%252FCleanShot%25202021-09-15%2520at%252020.41.14%25402x.png%3Falt%3Dmedia%26token%3D9aef0c18-9144-43dc-a07b-8dc808853bf5&width=768&dpr=4&quality=100&sign=9c9e2508&sv=2)]

 

IP Address Lookup

Takes in an IP address and returns geographical information based on that IP. This product includes GeoLite2 data created by MaxMind, available from [https://www.maxmind.com](https://www.maxmind.com/).

[![](../../_gitbook/image059a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FrNWIXzvFceYL3RfqlFT8%252FCleanShot%25202024-03-08%2520at%252009.41.52.png%3Falt%3Dmedia%26token%3Dd7265861-c3ea-4938-953d-ea12895c3591&width=768&dpr=4&quality=100&sign=62812dcc&sv=2)]

 

Set Data Source

This function allows you to specify which data source that database operations following it target. Remember that the order of operations in a function stack matters, so any database operations that come before your Set Data Source statement will use whatever is used normally.

[![](../../_gitbook/image86cd.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Fuploads%252FJTuqHZuW1P85zFCszrsZ%252FCleanShot%25202024-05-22%2520at%252013.44.27%25402x.png%3Falt%3Dmedia%26token%3Da577c81f-44d0-4e49-bc2b-211be31da2bb&width=768&dpr=4&quality=100&sign=aabc2606&sv=2)]

 

Async Function Await

[Learn about Async functions here](custom-functions.html#async-function-await)

Last updated 2 months ago

Was this helpful?