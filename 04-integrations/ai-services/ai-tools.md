---
category: ai-services
difficulty: advanced
last_updated: '2025-01-23'
related_docs: []
subcategory: 04-integrations/ai-services
tags:
- authentication
- api
- webhook
- trigger
- query
- filter
- middleware
- expression
- realtime
- transaction
- function
- background-task
- custom-function
- rest
- database
title: '[![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2'
---

[![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Favatar-1626464608697.png%3Fgeneration%3D1626464608902290%26alt%3Dmedia&width=32&dpr=4&quality=100&sign=ed8a4004&sv=2)![](../../_gitbook/image771a.jpg?url=https%3A%2F%2F3176331816-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-M8Si5XvG2QHSLi9JcVY%252Favatar-1626464608697.png%3Fgeneration%3D1626464608902290%26alt%3Dmedia&width=32&dpr=4&quality=100&sign=ed8a4004&sv=2)](../../index.html)















-   

    
    -   Using These Docs
    -   Where should I start?
    -   Set Up a Free Xano Account
    -   Key Concepts
    -   The Development Life Cycle
    -   Navigating Xano
    -   Plans & Pricing

-   

    
    -   Building with Visual Development
        
        -   APIs
            
            -   [Swagger (OpenAPI
                Documentation)](../building-with-visual-development/apis/swagger-openapi-documentation.html)
                    -   Custom Functions
            
            -   [Async
                Functions](../building-with-visual-development/custom-functions/async-functions.html)
                    -   [Background
            Tasks](../building-with-visual-development/background-tasks.html)
        -   [Triggers](../building-with-visual-development/triggers.html)
        -   [Middleware](../building-with-visual-development/middleware.html)
        -   [Configuring
            Expressions](../building-with-visual-development/configuring-expressions.html)
        -   [Working with
            Data](../building-with-visual-development/working-with-data.html)
            -   Functions
        
        -   [AI Tools](ai-tools.html)
        -   Database Requests
            
            -   Query All Records
                
                -   [External Filtering
                    Examples](database-requests/query-all-records/external-filtering-examples.html)
                            -   [Get
                Record](database-requests/get-record.html)
            -   [Add
                Record](database-requests/add-record.html)
            -   [Edit
                Record](database-requests/edit-record.html)
            -   [Add or Edit
                Record](database-requests/add-or-edit-record.html)
            -   [Patch
                Record](database-requests/patch-record.html)
            -   [Delete
                Record](database-requests/delete-record.html)
            -   [Bulk
                Operations](database-requests/bulk-operations.html)
            -   [Database
                Transaction](database-requests/database-transaction.html)
            -   [External Database
                Query](database-requests/external-database-query.html)
            -   [Direct Database
                Query](database-requests/direct-database-query.html)
            -   [Get Database
                Schema](database-requests/get-database-schema.html)
                    -   Data Manipulation
            
            -   [Create
                Variable](data-manipulation/create-variable.html)
            -   [Update
                Variable](data-manipulation/update-variable.html)
            -   [Conditional](data-manipulation/conditional.html)
            -   [Switch](data-manipulation/switch.html)
            -   [Loops](data-manipulation/loops.html)
            -   [Math](data-manipulation/math.html)
            -   [Arrays](data-manipulation/arrays.html)
            -   [Objects](data-manipulation/objects.html)
            -   [Text](data-manipulation/text.html)
                    -   [Security](security.html)
        -   APIs & Lambdas
            
            -   [Realtime
                Functions](apis-and-lambdas/realtime-functions.html)
            -   [External API
                Request](apis-and-lambdas/external-api-request.html)
            -   [Lambda
                Functions](apis-and-lambdas/lambda-functions.html)
                    -   [Data Caching
            (Redis)](data-caching-redis.html)
        -   [Custom Functions](custom-functions.html)
        -   [Utility Functions](utility-functions.html)
        -   [File Storage](file-storage.html)
        -   [Cloud Services](cloud-services.html)
            -   Filters
        
        -   [Manipulation](../filters/manipulation.html)
        -   [Math](../filters/math.html)
        -   [Timestamp](../filters/timestamp.html)
        -   [Text](../filters/text.html)
        -   [Array](../filters/array.html)
        -   [Transform](../filters/transform.html)
        -   [Conversion](../filters/conversion.html)
        -   [Comparison](../filters/comparison.html)
        -   [Security](../filters/security.html)
            -   Data Types
        
        -   [Text](../data-types/text.html)
        -   [Expression](../data-types/expression.html)
        -   [Array](../data-types/array.html)
        -   [Object](../data-types/object.html)
        -   [Integer](../data-types/integer.html)
        -   [Decimal](../data-types/decimal.html)
        -   [Boolean](../data-types/boolean.html)
        -   [Timestamp](../data-types/timestamp.html)
        -   [Null](../data-types/null.html)
            -   Environment Variables
    -   Additional Features
        
        -   [Response
            Caching](../additional-features/response-caching.html)
        
-   
    Testing and Debugging
    
    -   Testing and Debugging Function Stacks
    -   Unit Tests
    -   Test Suites

-   
    The Database
    
    -   Getting Started Shortcuts
    -   Designing your Database
    -   Database Basics
        
        -   [Using the Xano
            Database](../../the-database/database-basics/using-the-xano-database.html)
        -   [Field
            Types](../../the-database/database-basics/field-types.html)
        -   [Relationships](../../the-database/database-basics/relationships.html)
        -   [Database
            Views](../../the-database/database-basics/database-views.html)
        -   [Export and
            Sharing](../../the-database/database-basics/export-and-sharing.html)
        -   [Data
            Sources](../../the-database/database-basics/data-sources.html)
            -   Migrating your Data
        
        -   [Airtable to
            Xano](../../the-database/migrating-your-data/airtable-to-xano.html)
        -   [Supabase to
            Xano](../../the-database/migrating-your-data/supabase-to-xano.html)
        -   [CSV Import &
            Export](../../the-database/migrating-your-data/csv-import-and-export.html)
            -   Database Performance and Maintenance
        
        -   [Storage](../../the-database/database-performance-and-maintenance/storage.html)
        -   [Indexing](../../the-database/database-performance-and-maintenance/indexing.html)
        -   [Maintenance](../../the-database/database-performance-and-maintenance/maintenance.html)
        -   [Schema
            Versioning](../../the-database/database-performance-and-maintenance/schema-versioning.html)
        
-   CI/CD

-   
    Build For AI
    
    -   Agents
        
        -   [Templates](../../ai-tools/agents/templates.html)
            -   MCP Builder
        
        -   [Connecting
            Clients](../../ai-tools/mcp-builder/connecting-clients.html)
        -   [MCP
            Functions](../../ai-tools/mcp-builder/mcp-functions.html)
            -   Xano MCP Server

-   
    Build With AI
    
    -   Using AI Builders with Xano
    -   Building a Backend Using AI
    -   Get Started Assistant
    -   AI Database Assistant
    -   AI Lambda Assistant
    -   AI SQL Assistant
    -   API Request Assistant
    -   Template Engine
    -   Streaming APIs

-   
    File Storage
    
    -   File Storage in Xano
    -   Private File Storage

-   
    Realtime
    
    -   Realtime in Xano
    -   Channel Permissions
    -   Realtime in Webflow

-   
    Maintenance, Monitoring, and Logging
    
    -   Statement Explorer
    -   Request History
    -   Instance Dashboard
        
        -   Memory Usage
        
-   
    Building Backend Features
    
    -   User Authentication & User Data
        
        -   [Separating User
            Data](../../building-backend-features/user-authentication-and-user-data/separating-user-data.html)
        -   [Restricting Access
            (RBAC)](../../building-backend-features/user-authentication-and-user-data/restricting-access-rbac.html)
        -   [OAuth
            (SSO)](../../building-backend-features/user-authentication-and-user-data/oauth-sso.html)
            -   Webhooks
    -   Messaging
    -   Emails
    -   Custom Report Generation
    -   Fuzzy Search
    -   Chatbots

-   
    Xano Features
    
    -   Snippets
    -   Instance Settings
        
        -   [Release Track
            Preferences](../../xano-features/instance-settings/release-track-preferences.html)
        -   [Static IP
            (Outgoing)](../../xano-features/instance-settings/static-ip-outgoing.html)
        -   [Change Server
            Region](../../xano-features/instance-settings/change-server-region.html)
        -   [Direct Database
            Connector](../../xano-features/instance-settings/direct-database-connector.html)
        -   [Backup and
            Restore](../../xano-features/instance-settings/backup-and-restore.html)
        -   [Security
            Policy](../../xano-features/instance-settings/security-policy.html)
            -   Workspace Settings
        
        -   [Audit
            Logs](../../xano-features/workspace-settings/audit-logs.html)
            -   Advanced Back-end Features
        
        -   [Xano
            Link](../../xano-features/advanced-back-end-features/xano-link.html)
        -   [Developer API
            (Deprecated)](../../xano-features/advanced-back-end-features/developer-api-deprecated.html)
            -   Metadata API
        
        -   [Master Metadata
            API](../../xano-features/metadata-api/master-metadata-api.html)
        -   [Tables and
            Schema](../../xano-features/metadata-api/tables-and-schema.html)
        -   [Content](../../xano-features/metadata-api/content.html)
        -   [Search](../../xano-features/metadata-api/search.html)
        -   [File](../../xano-features/metadata-api/file.html)
        -   [Request
            History](../../xano-features/metadata-api/request-history.html)
        -   [Workspace Import and
            Export](../../xano-features/metadata-api/workspace-import-and-export.html)
        -   [Token Scopes
            Reference](../../xano-features/metadata-api/token-scopes-reference.html)
        
-   
    Xano Transform
    
    -   Using Xano Transform

-   
    Xano Actions
    
    -   What are Actions?
    -   Browse Actions

-   
    Team Collaboration
    
    -   Realtime Collaboration
    -   Managing Team Members
    -   Branching & Merging
    -   Role-based Access Control (RBAC)

-   
    Agencies
    
    -   Xano for Agencies
    -   Agency Features
        
        -   [Agency
            Dashboard](../../agencies/agency-features/agency-dashboard.html)
        -   [Client
            Invite](../../agencies/agency-features/client-invite.html)
        -   [Transfer
            Ownership](../../agencies/agency-features/transfer-ownership.html)
        -   [Agency
            Profile](../../agencies/agency-features/agency-profile.html)
        -   [Commission](../../agencies/agency-features/commission.html)
        -   [Private
            Marketplace](../../agencies/agency-features/private-marketplace.html)
        
-   
    Custom Plans (Enterprise)
    
    -   Xano for Enterprise (Custom Plans)
    -   Custom Plan Features
        
        -   Microservices
            
            -   Ollama
                
                -   [Choosing a
                    Model](../../enterprise/enterprise-features/microservices/ollama/choosing-a-model.html)
                                    -   [Tenant
            Center](../../enterprise/enterprise-features/tenant-center.html)
        -   [Compliance
            Center](../../enterprise/enterprise-features/compliance-center.html)
        -   [Security
            Policy](../../enterprise/enterprise-features/security-policy.html)
        -   [Instance
            Activity](../../enterprise/enterprise-features/instance-activity.html)
        -   [Deployment](../../enterprise/enterprise-features/deployment.html)
        -   [RBAC (Role-based Access
            Control)](../../enterprise/enterprise-features/rbac-role-based-access-control.html)
        -   [Xano
            Link](../../enterprise/enterprise-features/xano-link.html)
        -   [Resource
            Management](../../enterprise/enterprise-features/resource-management.html)
        
-   
    Your Xano Account
    
    -   Account Page
    -   Billing
    -   Referrals & Commissions

-   
    Troubleshooting & Support
    
    -   Error Reference
    -   Troubleshooting Performance
        
        -   [When a single workflow feels
            slow](../../troubleshooting-and-support/troubleshooting-performance/when-a-single-workflow-feels-slow.html)
        -   [When everything feels
            slow](../../troubleshooting-and-support/troubleshooting-performance/when-everything-feels-slow.html)
        -   [RAM
            Usage](../../troubleshooting-and-support/troubleshooting-performance/ram-usage.html)
        -   [Function Stack
            Performance](../../troubleshooting-and-support/troubleshooting-performance/function-stack-performance.html)
            -   Getting Help
        
        -   [Granting
            Access](../../troubleshooting-and-support/getting-help/granting-access.html)
        -   [Community Code of
            Conduct](../../troubleshooting-and-support/getting-help/community-code-of-conduct.html)
        -   [Community Content Modification
            Policy](../../troubleshooting-and-support/getting-help/community-content-modification-policy.html)
        -   [Reporting Potential Bugs and
            Issues](../../troubleshooting-and-support/getting-help/reporting-potential-bugs-and-issues.html)
        
-   
    Special Pricing
    
    -   Students & Education
    -   Non-Profits

-   
    Security
    
    -   Best Practices

[Powered by GitBook]

On this page

Was this helpful?

Copy

1.  [[üõ†Ô∏è]The Visual
    Builder](../building-with-visual-development.html)
2.  Functions

AI Tools 
========

 

MCP List Tools

Provides a list of available tools and their configurations from an MCP
server

Parameter

Purpose

url

The URL to access the MCP server

bearer token

If required, an authentication token to access the server

 

MCP Call Tool

Executes a tool available on a remote MCP server

Parameter

Purpose

url

The URL to access the MCP server

bearer token

If required, an authentication token to access the server

tool name

The name of the tool to call

args

The data that the tool requires, if any. This should usually be a JSON
object.

 

Call Agent

Calls an AI Agent that exists in this workspace

Parameter

Purpose

args

a JSON object of arguments the agent needs to run

allow\_tool\_execution

true or false, determines if the agent has permission to run tools

 

Template Engine

 

Quick Summary

The Template Engine, powered by Twig, is used to manipulate and
dynamically generate large blocks of text or code with your own data,
such as records from your Xano database, or from inputs sent to your
APIs.

It\'s great for helping generate things like AI prompts, HTML, and other
more large-format data without messing around with a bulk of separate
functions to do so.

<div>

</div>

 

What is the Template Engine?

At its core, think of the Template Engine as text replacement and
manipulation of the future. It is designed to give you a simple syntax
to quickly manipulate large text strings with dynamic data, such as\...

-   
    
        
    
    AI Prompts
    
-   
    
        
    
    HTML
    
-   
    
        
    
    JSON
    
-   
    
        
    
    SQL queries
    
The template engine is powered by Twig, which you can learn more about
[here](https://twig.symfony.com/).

 

When should I use the Template Engine instead of other text filters?

You should stick with filters like
[replace](../filters/text.html#replace) or [sprintf](../filters/text.html#sprintf) if you\'re manipulating short strings of text, such as:

-   
    
        
    
    Replacing a name inside of a string like \"Hello, \[first\_name\]
    \[last\_name\]\"
    
-   
    
        
    
    Dynamically providing a price for a single product
    
The Template Engine, however, is useful for content templates where:

-   
    
        
    
    The template will be edited by non-developers
    
-   
    
        
    
    The data structure is complex with nested objects
    
-   
    
        
    
    You need to include conditional sections
    
-   
    
        
    
    Data formatting (like dates) needs to be consistent
    
-   
    
        
    
    Templates might be reused with different data sources
    
If you\'re doing dynamic replacement over a longer block of text, such
as the example below, Template Engine will make this much easier for
you.

Copy

``` 
Write a personalized email to } } about their recent } purchase.

Include:
- Reference to their purchase history (they've ordered } times)
- Mention that their } will be delivered on }
- If }, offer them a }% discount on their next purchase
- Thank them for being a customer since }

Sign off with the name of their account manager: }
```

 

Using the Template Engine

<div>

1

###  

Look for the Template Engine function under Utility Functions.

![](../../_gitbook/image37ab.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FTf5FE3kGjwJFG8WWNy0n%252FCleanShot%25202025-04-02%2520at%252016.29.13.png%3Falt%3Dmedia%26token%3D8bbc4381-82cf-408a-af17-9b3bf0f6c70b&width=768&dpr=4&quality=100&sign=9a1f796f&sv=2)

2

###  

Once you add the Template Engine to your function stack, click the
[‚úèÔ∏è] button in the panel to open the editor, or use the AI
assistant to help write a template for you

3

###  

Take a tour of the editor and begin building your template.

![](../../_gitbook/imageb3b4.jpg?url=https%3A%2F%2F3699875497-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252F2tWsL4o1vHmDGb2UAUDD%252Fuploads%252FO9dhVXAaiLRKmNX5wrJX%252FCleanShot%25202025-04-02%2520at%252016.33.01.png%3Falt%3Dmedia%26token%3D928b4ec3-aee1-4dd1-8b89-3497e5dbd37e&width=768&dpr=4&quality=100&sign=5a4da712&sv=2)

</div>

 

Template Syntax

###  

Variables

Variables are wrapped in {{ curly braces }}, like this, and begin with a
\$ character. In the below example, we\'re getting the `name` from an object stored in the
`user1` variable.

Copy

``` 
Hi, }
```

Reference items in an array by using the item index.

Copy

``` 
Hi, }
```

###  

Conditionals

Conditionals are helpful if you want to dynamically determine what the
end result of your template looks like outside of the actual data. For
example, maybe you want VIP users to have a different greeting than
regular users.

Conditionals are wrapped in {% and %} and have support for `else` and `else if`

Copy

``` 

  Hey, }! Thanks for being a part of our VIP program.
{% else %}
  Hey, }! Thanks for reading.
{% endif %}
```

> In the above example, for this user:
>
> 
> 
> >
> Copy
>
> ``` 
> {
>     "name" == "Chris",
>     "vip" == true
>     }
> ```
> >
> \...the result would be:
>
> 
> 
> >
> Copy
>
> ``` 
> Hey, Chris! Thanks for being a part of our VIP program.
> ```
> 

Copy

``` 
{% if $score >== 90 %}
  Your grade is an A
{% elseif $score >== 80 %}
  Your grade is a B
{% elseif $score >== 70 %}
  Your grade is a C
{% else %}
  Your grade is an F
{% endif %}
```

> In the above example, for this score:
>
> 
> 
> >
> Copy
>
> ``` 
> score = 85
> ```
> >
> \...the result would be:
>
> 
> 
> >
> Copy
>
> ``` 
> Your grade is a B
> ```
> 
###  

Loops

You can use loops to populate lists of data without having to write out
separate lines for each item, or knowing how many items you\'ll need to
populate.

Copy

``` 

  - }x } at $} each
{% endfor %}
```

Data

Sample Output

Copy

``` 
[
  ,
  ,
  
]
```

-   
    
        
    
    2x Blue T-shirt at \$19.99 each
    
-   
    
        
    
    1x Denim Jeans at \$59.99 each
    
-   
    
        
    
    3x Cotton Socks at \$4.99 each
    
You can also use an Else statement at the end of your For loop to
determine what action to take if no items are found. In the next
example, if `$list` contains no items,
the template will return `No items found.`

Copy

``` 
{% for item in $list %}
  {{ item }}
{% else %}
  No items found.
{% endfor %}
```

###  

Filters

You can use Twig\'s built in filters, similar to our own, to transform
or manipulate data as part of the template.

The below list is some of the most essential filters used in Twig, but
it is not all of them. You can review the entire list
[here](https://twig.symfony.com/doc/3.x/filters/index.html).

Filter

Description

Example

Result

`upper`

Converts string to uppercase

`}` *When \$user.name
is \"John Smith\"*

\"JOHN SMITH\"

`lower`

Converts string to lowercase

`}` *When \$user.name
is \"John Smith\"*

\"john smith\"

`trim`

Removes whitespace from the beginning and end of a string

`}` *When \$user.input
is \" hello \"*

\"hello\"

`join`

Joins array elements into a string with a delimiter

`}` *When \$user.tags
is \[\"php\", \"twig\", \"web\"\]*

\"php, twig, web\"

`default`

Provides a fallback value if the variable is null, empty, or undefined

`}` *When \$user.middleName is null*

\"No middle name\"

`number_format`

Formats numbers with grouped thousands and decimal points

`}` *When \$product.price is 1234.56*

\"1,234.56\"

`shuffle`

Randomly shuffles an array

`}` *When \$user.items
is \[\"a\", \"b\", \"c\"\]*

*Random order like:* \[\"c\", \"a\", \"b\"\]

`date`

Formats dates using PHP\'s date syntax

`}` *When
\$user.createdAt is \"2023-12-25\"*

\"December 25, 2023\"

###  

Escape Filter (e)

The escape filter is used to format text using specifications designated
by the destination, such as a URL that only allows certain characters to
remain valid.

When you use `e` by itself without specifying a
format, it typically defaults to HTML escaping. This means it will
convert characters like `<`, `>`, `&`,
`"`, and `'` to
their HTML-safe equivalents.

When you specify a format (like `e('html')`,
`e('js')`, `e('url')`, etc.), you\'re explicitly telling
the Template Engine how to escape the content for a specific context,
which can provide more precise protection. We\'d recommend always
specifying the format, just to be safe.

####  

HTML Escaping

Copy

``` 
{% set $user_input = '<script>alert("XSS");</script>' %}
{{ $user_input|e('html') }}

Outputs: &lt;script&gt;alert(&quot;XSS&quot;);&lt;/script&gt;
```

####  

JavaScript Escaping

Copy

``` 
{% set $js_string = 'Hello "world"! \n New line' %}
{{ $js_string|e('js') }}
{# Outputs: Hello \"world\"! \\n New line #}
```

####  

URL Escaping

Copy

``` 
{% set $search_query = 'hello world & special chars' %}
{{ $search_query|e('url') }}
{# Outputs: hello+world+%26+special+chars #}
```

####  

CSS Escaping

Copy

``` 
{% set $css_value = 'expression(alert("XSS"))' %}
{{ $css_value|e('css') }}
{# Outputs: expression\28 alert\28 "XSS"\29 \29 #}
```

###  

Comments

You can insert comments into your templates by wrapping them in {\# and
\#}. They won\'t appear in your final template.

Copy

``` 
{# This is a hidden comment #}
```

You can check out some examples of the Template Engine in real-world
scenarios here: [Sample
Templates](../../xano-ai/template-engine.html#sample-templates).

Last updated 5 days ago

Was this helpful?